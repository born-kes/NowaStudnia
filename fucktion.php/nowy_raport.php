<?php /* zapytanie o wioskev	poka¿ raport => jaki => GET[typ]nowy raport => co pobraæ by porównaæ*//*  WARZNE Function * Data($GET['data']); * Data2Nowsza($data1 < $data2) * zap_Nowy_wpis($from, $Array_values, $nowy=true){ *//*	Tablica zwracana przez raport($typ,$id)0:id_wsi:			ws_all1:wlasnosc:			ws_all2:id:			ws_raport3:data_raport:	ws_raport4:pik:			ws_raport5:mie:			ws_raport6:axe:			ws_raport7:luk:			ws_raport8:zw:			ws_raport9:lk:			ws_raport10:kl:			ws_raport11:ck:			ws_raport12:tar:			ws_raport13:kat:			ws_raport14:ry:			ws_raport15:sz:			ws_raport16:player:		ws_raport		=> id USERA17:data_mobile:		ws_mobile18:procent:			ws_mobile	=> function procent ilosci wojsk (co zosta³o) / (max ~22000) = % zagrody19:donos:			ws_mobile	=> id USERA20:typ_data:	ws_typ21:typ:			ws_typ			=> OFF	policzony u urzytkownika 22:mur_data:		ws_mur23:mur:				ws_mur		=> policzony u u¿ytkownika24:opis_data:	ws_opis25:opis:		ws_opis			=> efekt ataku26:status_data:		ws_status27:status:			ws_status	=> OBRONA policzony u u¿ytkownika 28:zwiad_data:	ws_zwiad		=> godzina powrotu 	29:ile: 		ws_zwiad		porownanie daty mobilne // raport nowszyKoniec */if(isset($GET['w']) )@list($W['pik'],$W['mie'],$W['axe'],$W['luk'],$W['zw'],$W['lk'],$W['kl'],$W['ck'],$W['tar'],$W['kat'],$W['ry'],$W['sz'])= explode(",",$GET['w']);//echo function_exists($test); // function sprawdza czy funcia istniejeif(isset($GET['id']) ){	$raport = raport((int)$GET['id'] , $GET['typ']);if(isset($GET['data']) && Data2Nowsza($GET['data'],Data() ) ){	 // sprawdziæ czy stary raport nie jest lepszy?	if(Data2Nowsza($raport['data_mobile'],$GET['data']) ){					// -- stare mobile niema znaczenia --unset($efekt);									//ustalenie typu wioski												// typ wioski ustalony w przegl¹darce		if(isset($GET['typ_mobile']))		$efekt['typ_mobile']	= (int)$GET['typ_mobile'];		if(isset($W) )		$efekt['procent']		= (int)(ilosc_zagroda($W)/22000);				if(isset($efekt) )		zap_Nowy_wpis('mobile' , $efekt );			};   // zmieniæ dane   	if(Data2Nowsza($raport['data_mur '],$GET['data']) ){						// -- stary mur niema znaczenia --unset($efekt);		//poziom muru ustalony w przegl¹darce		if(isset($GET['mur'] && MUR($GET['mur']) )		$efekt['mur']	= $GET['mur'];		isset($efekt)?			zap_Nowy_wpis('mur' , $GET['mur'] );   };   // zmieniæ dane	if(Data2Nowsza($raport['data_raport'],$GET['data']) ){					// sary raport wys³any do opisówunset($efekt);		// Raport z wioski		if(isset($GET['w']) && is_array($w) ){		$efekt=$W;		$efekt['donos'] = $GET['user_id'];		}isset($efekt)?		zap_Nowy_wpis('raport' ,  $efekt );   };   // zmieniæ dane   	if(Data2Nowsza($raport['data_typ'],$GET['data']) ){						// Typ wioski siê chyba nie zmienia jak sie zmieni to opisunset($efekt);			// typ ustalony w przegl¹darce		if( isset($GET['typ') )		$efekt['typ']	= $GET['typ'];		isset($efekt)?		zap_Nowy_wpis($from, $value, $nowy=true);   // zmieniæ dane   }	if(Data2Nowsza($raport['data_zwiad '],$GET['data']) ){					// sprawdziæ ruchy wojsk czy dodaæ czy nie dodawaæunset($efekt);		if($GET['zw'] )		$efekt['zw'] = $GET['zw'];		isset($efekt)?	zap_Nowy_wpis('zwiad' ,$efekt);	    };   // zmieniæ dane						} 		if(isset($raport) && isset($GET['dane']) && $GET['dane']=='json' ){  headJSON(); body_js('var json='. json($raport) ); }else if( isset($raport) )body('raport');}